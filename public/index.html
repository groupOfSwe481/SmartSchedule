<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSchedule - Redirecting...</title>
    <script>
        // Immediately redirect to LoginReg.html for unauthenticated users
        // or to their role-specific dashboard if authenticated
        (function() {
            const userStr = localStorage.getItem('user') || sessionStorage.getItem('user');
            const token = localStorage.getItem('token') || sessionStorage.getItem('token');

            if (userStr && token) {
                try {
                    const user = JSON.parse(userStr);
                    const rolePages = {
                        'Scheduler':     '/index.html',
                        'Student':       '/StudentHP.html',
                        'Faculty':       '/FacultyHP.html',
                        'LoadCommittee': '/LoadCommitteeHP.html'
                    };
                    const targetPage = rolePages[user.role] || '/LoginReg.html';

                    // Only redirect if we're on the public landing page
                    if (window.location.pathname === '/' || window.location.pathname === '/public/index.html') {
                        window.location.replace(targetPage);
                    }
                } catch (error) {
                    window.location.replace('/LoginReg.html');
                }
            } else {
                // No authentication - redirect to login
                window.location.replace('/LoginReg.html');
            }
        })();
    </script>
</head>
<body>
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif;">
        <p>Redirecting to SmartSchedule...</p>
    </div>
</body>
</html>
